import{I as J,J as W,x as z,B as H,w as K,F as Q,K as X}from"./element-plus.796eaf0d.js";import{m as A,r as d,w as j,f as P,k as G,R as Y,o as i,c as C,X as _,Q as m,F as D,a7 as Z,M as b,u as g,P as N,J as ee,T as M,am as O,U as I,a as ae,V as L,W as T}from"./@vue.868258c7.js";import{u as te,c as le}from"./index.21661719.js";import{u as oe}from"./vue-i18n.8110a5da.js";const ne=A({__name:"CForm",props:{options:{type:Array,require:!0},gutter:{type:Number,default:24},colSpan:{type:Object,require:!1},value:{type:Object,require:!0,default:()=>{}},loading:{type:Boolean,default:!1}},emits:["submit","update:value"],setup(f,{expose:S,emit:k}){const l=f,u={input:"el-input",select:"el-select",inputNumber:"el-input-number",timePicker:"el-time-picker",datePicker:"el-date-picker"},y=["el-input","el-input-number","async-select"],s=d(),V=d({}),v=d([]),c=d({});j(()=>l.options,a=>{const t={};v.value=a.map(p=>{let{name:r,type:h,rules:F,tagName:e,...B}=p;return F&&(t[r]=F),u[h]&&!e&&(e=u[h]),{...B,name:r,tagName:e}}),V.value=t},{immediate:!0});const x=P(()=>{const a=l.options&&l.options.length>10?{md:12,xs:24}:{span:24};return l.colSpan||a});async function w(){var a;await((a=s.value)==null?void 0:a.validate(t=>{if(t){const p=l.value;k("submit",p)}}))}function R(...a){var t;(t=s.value)==null||t.validateField(...a)}function E(...a){var t;(t=s.value)==null||t.validate(...a)}function o(...a){var t;(t=s.value)==null||t.resetFields(...a)}function n(...a){var t;(t=s.value)==null||t.clearValidate(...a)}return S({validateField:R,validate:E,resetFields:o,clearValidate:n,submit:w}),j(()=>l.value,a=>{c.value=a},{immediate:!0}),G(()=>{k("update:value",c.value)}),(a,t)=>{const p=J,r=K,h=z,F=H;return Y((i(),C("div",null,[_(g(W),b({ref_key:"formRef",ref:s,rules:V.value,model:f.value},a.$attrs),{default:m(()=>[_(h,{gutter:f.gutter},{default:m(()=>[(i(!0),C(D,null,Z(v.value,(e,B)=>(i(),C(D,{key:B},[e.hidden?I("",!0):(i(),N(r,b({key:0},e.colSpan||g(x),{key:e.name}),{default:m(()=>[_(p,b({prop:e.name,label:e.label},e.itemExtra),{default:m(()=>{var q,$;return[e.scopedSlot&&a.$slots[e.scopedSlot]?ee(a.$slots,e.scopedSlot,{key:0,value:f.value,option:e}):e.tagName?(i(),C(D,{key:1},[y.includes(e.tagName)?(i(),N(M(e.tagName),b({key:0,modelValue:c.value[e.name],"onUpdate:modelValue":U=>c.value[e.name]=U,modelModifiers:{trim:!0}},e.props,O((q=e.on)!=null?q:{})),null,16,["modelValue","onUpdate:modelValue"])):(i(),N(M(e.tagName),b({key:1,modelValue:c.value[e.name],"onUpdate:modelValue":U=>c.value[e.name]=U},e.props,O(($=e.on)!=null?$:{})),null,16,["modelValue","onUpdate:modelValue"]))],64)):I("",!0)]}),_:2},1040,["prop","label"])]),_:2},1040))],64))),128))]),_:3},8,["gutter"])]),_:3},16,["rules","model"])])),[[F,f.loading]])}}}),se={class:"dialog-footer"},de=A({__name:"ArticleEditDialog",emits:["close"],setup(f,{expose:S,emit:k}){const{t:l}=oe(),u=d(!1),y=d(),s=d(""),{gtMd:V}=te(),v=d({}),c=P(()=>V.value?"50%":"80%");function x(o){v.value=Object.assign({},o),u.value=!0}function w(){var o;(o=y.value)==null||o.clearValidate(),u.value=!1}async function R(o){!o||await o.validate(n=>{n&&(le("success",l("page.common.notice.submit_success")),k("close"),u.value=!1)})}const E=P(()=>[{name:"title",type:"input",label:l("page.common.design.article.form.title"),rules:[{required:!0,message:l("page.common.design.article.form.title_placeholder"),trigger:"blur"}],props:{maxLength:50,placeholder:l("page.common.design.article.form.title_placeholder")}},{name:"content",type:"input",label:l("page.common.design.article.form.content"),rules:[{required:!0,message:l("page.common.design.article.form.content_placeholder"),trigger:"blur"}],props:{autosize:{minRows:4,maxRows:8},type:"textarea",placeholder:l("page.common.design.article.form.content_placeholder")}}]);return S({edit:x,title:s}),(o,n)=>{const a=Q,t=ne,p=X;return i(),N(p,{modelValue:u.value,"onUpdate:modelValue":n[2]||(n[2]=r=>u.value=r),width:g(c),title:s.value,onClose:w},{footer:m(()=>[ae("span",se,[_(a,{onClick:w},{default:m(()=>[L(T(g(l)("page.common.btn.cancel")),1)]),_:1}),_(a,{type:"primary",onClick:n[0]||(n[0]=r=>R(y.value))},{default:m(()=>[L(T(g(l)("page.common.btn.confirm")),1)]),_:1})])]),default:m(()=>[_(t,{ref_key:"ruleFormRef",ref:y,value:v.value,"onUpdate:value":n[1]||(n[1]=r=>v.value=r),"label-width":"80px",options:g(E)},null,8,["value","options"])]),_:1},8,["modelValue","width","title"])}}});export{ne as _,de as a};
